package com.rise.live.Fragment;

import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import androidx.fragment.app.Fragment;
import androidx.recyclerview.widget.GridLayoutManager;
import androidx.recyclerview.widget.RecyclerView;
import androidx.swiperefreshlayout.widget.SwipeRefreshLayout;

import com.rise.live.Activity.PlayerActivity;
import com.rise.live.Adapter.ChannelAdapter;
import com.rise.live.Model.Channel;
import com.rise.live.R;
import com.rise.live.Utils.PrefManager;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Map;

public class ChannelsFragment extends Fragment {

    RecyclerView rvChannels;
    List<Channel> channelList;
    ChannelAdapter channelAdapter;
    SwipeRefreshLayout swipeRefreshLayout;
    PrefManager prefManager;
    private int idCounter = 1;
    private Map<String, Channel> channelMap = new HashMap<>();

    public ChannelsFragment() {}

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_channels, container, false);

        prefManager = new PrefManager(getActivity());
        swipeRefreshLayout = view.findViewById(R.id.swipeRefreshLayoutChannels);

        rvChannels = view.findViewById(R.id.recyclerViewChannels);
        rvChannels.setHasFixedSize(true);
        rvChannels.setLayoutManager(new GridLayoutManager(getContext(), prefManager.getInt("wallpaperColumns")));

        channelList = new ArrayList<>();
        channelAdapter = new ChannelAdapter(getContext(), channelList);
        rvChannels.setAdapter(channelAdapter);

        swipeRefreshLayout.setOnRefreshListener(this::loadChannels);

        loadChannels();

        return view;
    }

    private void addOrUpdateChannel(String name, String category, Map<String, String> qualities, String desc, String language) {
        if (channelMap.containsKey(name)) {
            // أضف الجودات الناقصة فقط
            Channel existing = channelMap.get(name);
            for (Map.Entry<String, String> entry : qualities.entrySet()) {
                if (!existing.getQualityLinks().containsKey(entry.getKey())) {
                    existing.addQuality(entry.getKey(), entry.getValue());
                }
            }
        } else {
            // أضف قناة جديدة
            Channel newChannel = new Channel(0, "https://i.imgur.com/TVIbHns.png", name, category, "live", qualities, desc, language);
            channelMap.put(name, newChannel);
            channelList.add(newChannel);
        }
    }

    private void loadChannels() {
        swipeRefreshLayout.setRefreshing(true);
        channelList.clear();
        channelMap.clear();
        idCounter = 1;

        // Religious Channels
        addOrUpdateChannel("Saudi Qraan", "دينية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/126"), "", "ar");
        addOrUpdateChannel("Saudi Sunna", "دينية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/958"), "", "ar");
        addOrUpdateChannel("AL Nas", "دينية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4368"), "", "ar");
        addOrUpdateChannel("Almajd Quraan", "دينية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/957"), "", "ar");
        addOrUpdateChannel("Almajd Hadeth", "دينية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/956"), "", "ar");
        addOrUpdateChannel("Masr Quraan", "دينية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/2091"), "", "ar");

        // beIN SPORTS
        addOrUpdateChannel("beIN SPORTS 1", "beIN Sports", Map.of("LOW", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4454", "HEVC", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/459", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/46"), "", "ar");
        addOrUpdateChannel("beIN SPORTS 2", "beIN Sports", Map.of("LOW", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4455", "HEVC", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/450", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/47"), "", "ar");
        addOrUpdateChannel("beIN SPORTS 3", "beIN Sports", Map.of("LOW", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4457", "HEVC", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/451", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/49"), "", "ar");
        addOrUpdateChannel("beIN SPORTS 4", "beIN Sports", Map.of("LOW", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4458", "HEVC", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/453", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/50"), "", "ar");
        addOrUpdateChannel("beIN SPORTS 5", "beIN Sports", Map.of("LOW", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4459", "HEVC", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/3875", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/51"), "", "ar");
        addOrUpdateChannel("beIN SPORTS 6", "beIN Sports", Map.of("LOW", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4460", "HEVC", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/455", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/52"), "", "ar");
        addOrUpdateChannel("beIN SPORTS 7", "beIN Sports", Map.of("LOW", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4461", "HEVC", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4002", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/53"), "", "ar");
        addOrUpdateChannel("beIN SPORTS 8", "beIN Sports", Map.of("HEVC", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/457", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/54"), "", "ar");
        addOrUpdateChannel("beIN SPORTS 9", "beIN Sports", Map.of("LOW", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4456", "HEVC", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4003", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4034"), "", "ar");
        addOrUpdateChannel("beIN Sports News", "beIN Sports", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/2051"), "", "ar");
        addOrUpdateChannel("beIN Sport Global", "beIN Sports", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4336"), "", "ar");

        // Other Sports
        addOrUpdateChannel("Alwan Sport 1", "رياضة أخرى", Map.of("SD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4439", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4445", "FHD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4399"), "", "ar");
        addOrUpdateChannel("Alwan Sport 2", "رياضة أخرى", Map.of("SD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4440", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4446", "FHD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4400"), "", "ar");
        addOrUpdateChannel("Alwan Sport 3", "رياضة أخرى", Map.of("SD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4441", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4447", "FHD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4401"), "", "ar");
        addOrUpdateChannel("Alwan Sport 4", "رياضة أخرى", Map.of("SD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4442", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4448", "FHD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4402"), "", "ar");
        addOrUpdateChannel("Alwan Sport 5", "رياضة أخرى", Map.of("SD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4443", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4449", "FHD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4418"), "", "ar");
        addOrUpdateChannel("Alwan Sport 6", "رياضة أخرى", Map.of("FHD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4419"), "", "ar");
        addOrUpdateChannel("[KSA] Thamanya Sports 1", "رياضة أخرى", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4427", "1080p", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4119"), "", "ar");
        addOrUpdateChannel("[KSA] Thamanya Sports 2", "رياضة أخرى", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4429", "1080p", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4120"), "", "ar");
        addOrUpdateChannel("[KSA] Thamanya Sports 3", "رياضة أخرى", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4430", "1080p", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4239"), "", "ar");
        addOrUpdateChannel("Starz Play SPORT 1", "رياضة أخرى", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4040"), "", "ar");
        addOrUpdateChannel("Starz Play SPORT 2", "رياضة أخرى", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4041"), "", "ar");
        addOrUpdateChannel("Starz Play SPORT 3", "رياضة أخرى", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4284"), "", "ar");

        // MBC
        addOrUpdateChannel("MBC 1", "MBC", Map.of("SD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/2771", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/845"), "", "ar");
        addOrUpdateChannel("MBC 2", "MBC", Map.of("SD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/2772", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/846"), "", "ar");
        addOrUpdateChannel("MBC 3", "MBC", Map.of("SD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/2773", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/847"), "", "ar");
        addOrUpdateChannel("MBC 4", "MBC", Map.of("SD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/2774", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/848"), "", "ar");
        addOrUpdateChannel("MBC 5", "MBC", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/2114"), "", "ar");
        addOrUpdateChannel("MBC Bollywood", "MBC", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/849"), "", "ar");
        addOrUpdateChannel("MBC Massr", "MBC", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/850"), "", "ar");
        addOrUpdateChannel("MBC Masr 2", "MBC", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/851"), "", "ar");
        addOrUpdateChannel("MBC Drama", "MBC", Map.of("SD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/2778", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/852"), "", "ar");
        addOrUpdateChannel("MBC Action", "MBC", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/853", "UHD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/865"), "", "ar");
        addOrUpdateChannel("MBC Max", "MBC", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/854"), "", "ar");
        addOrUpdateChannel("MBC Iraq", "MBC", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/855"), "", "ar");
        addOrUpdateChannel("MBC Variety", "MBC", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/857"), "", "ar");

        // OSN
        addOrUpdateChannel("OSN YaHala", "OSN", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4026"), "", "ar");
        addOrUpdateChannel("OSN Hala Bil Araby", "OSN", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/156"), "", "ar");
        addOrUpdateChannel("OSN YAHALA AFLAM", "OSN", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/161"), "", "ar");
        addOrUpdateChannel("OSN MUSALSALAT", "OSN", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4027"), "", "ar");
        addOrUpdateChannel("OSN MUSALSALAT 2", "OSN", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4025"), "", "ar");
        addOrUpdateChannel("OSN AL YAWM", "OSN", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/2828"), "", "ar");
        addOrUpdateChannel("OSN Movies Action", "OSN", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/155"), "", "ar");
        addOrUpdateChannel("OSN Star Movies", "OSN", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/159"), "", "ar");
        addOrUpdateChannel("OSN Star World", "OSN", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/160"), "", "ar");
        addOrUpdateChannel("OSN History Channel", "OSN", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/167"), "", "ar");
        addOrUpdateChannel("OSN Nat Geo", "OSN", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/157"), "", "ar");

        // Rotana
        addOrUpdateChannel("Rotana Cinema", "Rotana", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/106"), "", "ar");
        addOrUpdateChannel("Rotana Cinema KSA", "Rotana", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/107"), "", "ar");
        addOrUpdateChannel("Rotana Aflam", "Rotana", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/108"), "", "ar");
        addOrUpdateChannel("Rotana Comedy", "Rotana", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/109"), "", "ar");
        addOrUpdateChannel("Rotana Classic", "Rotana", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/110"), "", "ar");
        addOrUpdateChannel("Rotana Drama", "Rotana", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/3215"), "", "ar");
        addOrUpdateChannel("Rotana Clip", "Rotana", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/3217"), "", "ar");
        addOrUpdateChannel("Rotana Khaliji", "Rotana", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/3218"), "", "ar");

        // ART Channels
        addOrUpdateChannel("ART Aflam 1", "ART", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/997"), "", "ar");
        addOrUpdateChannel("ART Aflam 2", "ART", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/102"), "", "ar");
        addOrUpdateChannel("ART Cinema", "ART", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/103"), "", "ar");
        addOrUpdateChannel("ART Hekayat 1", "ART", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/104"), "", "ar");
        addOrUpdateChannel("ART Hekayat 2", "ART", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/105"), "", "ar");

        // Kids Channels
        addOrUpdateChannel("beIN Jeem", "أطفال", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/22"), "", "ar");
        addOrUpdateChannel("beIN Baraeem", "أطفال", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/2028"), "", "ar");
        addOrUpdateChannel("beIN JUNIOR", "أطفال", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/2947"), "", "ar");
        addOrUpdateChannel("beIN DREAMWORKS", "أطفال", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/2948"), "", "ar");
        addOrUpdateChannel("Cartoon Network Arabic", "أطفال", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/2949"), "", "ar");
        addOrUpdateChannel("Cartoon Network", "أطفال", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/1011"), "", "ar");
        addOrUpdateChannel("Spacetoon", "أطفال", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/1017"), "", "ar");
        addOrUpdateChannel("Toyor Al Ganna", "أطفال", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/1020"), "", "ar");
        addOrUpdateChannel("Majid", "أطفال", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/1019"), "", "ar");
        addOrUpdateChannel("Mwaheb", "أطفال", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/1016"), "", "ar");
        addOrUpdateChannel("Kooky", "أطفال", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/1015"), "", "ar");

        // News Channels
        addOrUpdateChannel("Al Jazeera", "أخبار", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/999", "FHD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/1003"), "", "ar");
        addOrUpdateChannel("Al Jazeera Documentry", "أخبار", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/1000"), "", "ar");
        addOrUpdateChannel("AL JAZEERA MUBASHER", "أخبار", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/3208"), "", "ar");
        addOrUpdateChannel("Al Arabiya", "أخبار", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/1001"), "", "ar");
        addOrUpdateChannel("Al Arabiya Alhadaath", "أخبار", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/1002"), "", "ar");
        addOrUpdateChannel("BBC Arabic", "أخبار", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/1005"), "", "ar");
        addOrUpdateChannel("Sky News", "أخبار", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/1007"), "", "ar");
        addOrUpdateChannel("RT Arabic", "أخبار", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/1004"), "", "ar");
        addOrUpdateChannel("France 24 Arabic", "أخبار", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/3206"), "", "ar");
        addOrUpdateChannel("DW Arabic", "أخبار", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/3207"), "", "ar");
        addOrUpdateChannel("Asharq", "أخبار", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/3210"), "", "ar");

        // Egyptian Channels
        addOrUpdateChannel("ON Time Sport 1", "مصرية", Map.of("SD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4298", "HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/507"), "", "ar");
        addOrUpdateChannel("ON Time Sport 2", "مصرية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/949"), "", "ar");
        addOrUpdateChannel("Al Ahly TV", "مصرية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/952"), "", "ar");
        addOrUpdateChannel("Zamalek TV", "مصرية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/2068"), "", "ar");
        addOrUpdateChannel("CBC", "مصرية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/502"), "", "ar");
        addOrUpdateChannel("CBC Drama", "مصرية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/500"), "", "ar");
        addOrUpdateChannel("CBC Sofra", "مصرية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/501"), "", "ar");
        addOrUpdateChannel("DMC", "مصرية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/503"), "", "ar");
        addOrUpdateChannel("Al Nahar", "مصرية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/504"), "", "ar");
        addOrUpdateChannel("Al Nahar Drama", "مصرية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/505"), "", "ar");
        addOrUpdateChannel("ON Drama", "مصرية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/506"), "", "ar");
        addOrUpdateChannel("ON E", "مصرية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/508"), "", "ar");
        addOrUpdateChannel("Al Hayah", "مصرية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/509"), "", "ar");
        addOrUpdateChannel("Mehwar", "مصرية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/510"), "", "ar");
        addOrUpdateChannel("Nile Sport", "مصرية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/496"), "", "ar");
        addOrUpdateChannel("Nile Comedy", "مصرية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/497"), "", "ar");

        // Moroccan Channels
        addOrUpdateChannel("Al Oula International", "مغربية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/726"), "", "ar");
        addOrUpdateChannel("Al Maghribia", "مغربية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/727"), "", "ar");
        addOrUpdateChannel("2M Maroc", "مغربية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/728"), "", "ar");
        addOrUpdateChannel("Chada TV", "مغربية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/729"), "", "ar");
        addOrUpdateChannel("Assadissa", "مغربية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/730"), "", "ar");
        addOrUpdateChannel("Arriadia", "مغربية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/731", "TNT HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/4489"), "", "ar");
        addOrUpdateChannel("Medi1 TV", "مغربية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/732"), "", "ar");
        addOrUpdateChannel("Tele Maroc", "مغربية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/735"), "", "ar");
        addOrUpdateChannel("Tamazight", "مغربية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/736", "FHD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/3114"), "", "ar");
        addOrUpdateChannel("M24", "مغربية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/3109"), "", "ar");
        addOrUpdateChannel("Al Maghribia News", "مغربية", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/734"), "", "ar");

        // Movies and Entertainment
        addOrUpdateChannel("beIN Movies 1", "أفلام و ترفيه", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/24"), "", "ar");
        addOrUpdateChannel("beIN Movies 2", "أفلام و ترفيه", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/17"), "", "ar");
        addOrUpdateChannel("beIN Movies 3", "أفلام و ترفيه", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/18"), "", "ar");
        addOrUpdateChannel("beIN Movies 4", "أفلام و ترفيه", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/19"), "", "ar");
        addOrUpdateChannel("beIN Series 1", "أفلام و ترفيه", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/20"), "", "ar");
        addOrUpdateChannel("beIN Series 2", "أفلام و ترفيه", Map.of("HD", "http://ugeen.live:8080/Ugeen_VIP0cY0Hy/aq6ogz/21"), "", "ar");


        channelAdapter.notifyDataSetChanged();
        swipeRefreshLayout.setRefreshing(false);

        channelAdapter.setOnItemClickListener((view, obj, position) -> {
            Intent intent = new Intent(getContext(), PlayerActivity.class);
            intent.putExtra("name", obj.getChannelName());
            intent.putExtra("image", obj.getChannelImage());
            intent.putExtra("qualities", (java.io.Serializable) obj.getQualityLinks()); // تمرير Map
            startActivity(intent);
        });
    }
}
